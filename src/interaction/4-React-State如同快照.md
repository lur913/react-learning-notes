# ğŸ“¸ React State å¦‚åŒå¿«ç…§

## ğŸ” Stateçš„å¿«ç…§ç‰¹æ€§

Reactä¸­çš„stateå¹¶ä¸åƒæ™®é€šçš„JavaScriptå˜é‡é‚£æ ·å¯ä»¥éšæ—¶è¯»å†™ï¼Œå®ƒæ›´åƒæ˜¯ä¸€å¼ **å¿«ç…§**ï¼š
- è®¾ç½®stateä¸ä¼šä¿®æ”¹ç°æœ‰å˜é‡ï¼Œè€Œæ˜¯è§¦å‘ä¸€æ¬¡æ–°çš„æ¸²æŸ“
- åœ¨ä¸€æ¬¡æ¸²æŸ“å†…ï¼Œstateçš„å€¼å§‹ç»ˆä¿æŒä¸å˜

## ğŸ”„ è®¾ç½®Stateè§¦å‘æ¸²æŸ“è¿‡ç¨‹

å½“ä½ è°ƒç”¨`setState`å‡½æ•°æ—¶ï¼š
1. ğŸš© é€šçŸ¥ReactçŠ¶æ€å·²æ›´æ–°
2. ğŸ“¦ Reactå°†æ–°å€¼å­˜å‚¨èµ·æ¥
3. ğŸ”„ è§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“
4. ğŸ–¼ï¸ ç»„ä»¶è·å–æ–°çš„stateå€¼å¹¶ç”Ÿæˆæ–°UIå¿«ç…§

```jsx
// ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒsetIsSent(true)ä¼šé€šçŸ¥Reacté‡æ–°æ¸²æŸ“UI
function Form() {
  const [isSent, setIsSent] = useState(false);
  
  if (isSent) {
    return <h1>Your message is on its way!</h1>
  }

  return (
    <button onClick={() => setIsSent(true)}>
      Send
    </button>
  );
}
```

## ğŸ“· æ¸²æŸ“ç”ŸæˆUIå¿«ç…§

Reactæ¸²æŸ“ç»„ä»¶æ—¶ï¼š
1. ğŸ“ Reactè°ƒç”¨ä½ çš„å‡½æ•°ç»„ä»¶
2. ğŸ‘“ å‡½æ•°æ‰§è¡Œå¹¶è¿”å›JSXï¼ˆUIå¿«ç…§ï¼‰
3. ğŸ–¥ï¸ Reactæ›´æ–°å±å¹•åŒ¹é…æ­¤å¿«ç…§

å…³é”®æ¦‚å¿µï¼š**æ¯æ¬¡æ¸²æŸ“éƒ½èƒ½"çœ‹åˆ°"å±äºå®ƒé‚£æ¬¡æ¸²æŸ“çš„stateå€¼**

## âš¡ Stateå€¼åœ¨æ¸²æŸ“å†…ä¿æŒå›ºå®š

åŒä¸€æ¬¡æ¸²æŸ“ä¸­ï¼Œ**stateå€¼æ°¸è¿œä¸ä¼šæ”¹å˜**ï¼Œå³ä½¿äº‹ä»¶å¤„ç†å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼š

```jsx
function handleClick() {
  setNumber(number + 1); // number = 0 (å½“å‰æ¸²æŸ“å€¼)
  setNumber(number + 1); // number ä»ç„¶ = 0
  setNumber(number + 1); // number ä»ç„¶ = 0
}
```

ä¸Šé¢çš„ä»£ç ä¸­ï¼Œè™½ç„¶`setNumber`è¢«è°ƒç”¨ä¸‰æ¬¡ï¼Œä½†åœ¨è¯¥æ¸²æŸ“çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œ`number`çš„å€¼å§‹ç»ˆæ˜¯`0`ã€‚

### ğŸ§© ç¤ºä¾‹è§£æ

```jsx
// ç‚¹å‡»+3æŒ‰é’®æ—¶
function Counter() {
  const [number, setNumber] = useState(0);
  
  return (
    <button onClick={() => {
      setNumber(number + 1); // 0 + 1 = 1
      setNumber(number + 1); // ä»ç„¶æ˜¯ 0 + 1 = 1
      setNumber(number + 1); // ä»ç„¶æ˜¯ 0 + 1 = 1
    }}>+3</button>
  );
}
```

ä¸ºä»€ä¹ˆç‚¹å‡»åè®¡æ•°å™¨åªå¢åŠ åˆ°1ï¼Ÿå› ä¸º**åœ¨ä¸€æ¬¡æ¸²æŸ“å†…ï¼Œ`number`çš„å€¼å§‹ç»ˆä¸º0**ã€‚

## â±ï¸ éšæ—¶é—´å˜åŒ–çš„State

çŠ¶æ€å€¼ä¼šéšæ—¶é—´å˜åŒ–ï¼Œä½†åœ¨ç‰¹å®šçš„ä¸€æ¬¡æ¸²æŸ“ä¸­ï¼Œå®ƒæ˜¯å›ºå®šçš„ï¼š

```jsx
function handleClick() {
  setNumber(number + 5);
  alert(number); // è¿™é‡Œå§‹ç»ˆæ˜¾ç¤ºåŸå§‹å€¼ï¼Œä¸æ˜¯æ›´æ–°åçš„å€¼
}
```

å³ä½¿åœ¨å¼‚æ­¥ä»£ç ä¸­ï¼ŒReactä¹Ÿä¼šä¿æŒçŠ¶æ€çš„å¿«ç…§ç‰¹æ€§ï¼š

```jsx
function handleClick() {
  setNumber(number + 5);
  setTimeout(() => {
    alert(number); // 3ç§’åä»ç„¶æ˜¾ç¤ºåŸå§‹å€¼ï¼Œè€Œä¸æ˜¯æ›´æ–°åçš„å€¼
  }, 3000);
}
```

## ğŸ­ å¯¹æ¯”å¿ƒæ™ºæ¨¡å‹

### âŒ é”™è¯¯ç†è§£ï¼šStateä½œä¸ºå¯å˜å˜é‡
```jsx
// è¿™ä¸æ˜¯Reactçš„å·¥ä½œæ–¹å¼
onClick={() => {
  number = number + 1; // ç›´æ¥ä¿®æ”¹å˜é‡
  number = number + 1; // ç»§ç»­ä¿®æ”¹åŒä¸€å˜é‡
  number = number + 1; // å˜é‡æœ€ç»ˆå¢åŠ 3
}}
```

### âœ… æ­£ç¡®ç†è§£ï¼šStateä½œä¸ºå¿«ç…§
```jsx
// Reactçš„å®é™…å·¥ä½œæ–¹å¼
onClick={() => {
  setNumber(0 + 1); // è¯·æ±‚ç”¨1æ¸²æŸ“
  setNumber(0 + 1); // è¯·æ±‚ç”¨1æ¸²æŸ“
  setNumber(0 + 1); // è¯·æ±‚ç”¨1æ¸²æŸ“
}}
```

## ğŸ’¡ å®é™…åº”ç”¨ç¤ºä¾‹

æ€è€ƒä¸€ä¸ªè¡¨å•æäº¤åœºæ™¯ï¼š
1. ç”¨æˆ·ç‚¹å‡»"å‘é€"æŒ‰é’®ï¼Œç»™Aliceå‘æ¶ˆæ¯
2. åœ¨5ç§’å»¶è¿Ÿçš„æ¶ˆæ¯å‘é€å®Œæˆå‰ï¼Œç”¨æˆ·å°†æ”¶ä»¶äººæ”¹ä¸ºBob
3. æœ€ç»ˆalertä¼šæ˜¾ç¤ºä»€ä¹ˆï¼Ÿ

```jsx
function handleSubmit() {
  // ç”¨æˆ·ç‚¹å‡»æ—¶ï¼Œtoæ˜¯"Alice"
  setTimeout(() => {
    alert(`ä½ å‘ ${to} è¯´äº†${message}`);
    // å³ä½¿ç”¨æˆ·å·²å°†toæ”¹ä¸º"Bob"ï¼Œ
    // è¿™é‡Œä»ç„¶æ˜¾ç¤º"ä½ å‘Aliceè¯´äº†..."
  }, 5000);
}
```

**ç»“è®º**ï¼šalertæ˜¾ç¤ºçš„æ˜¯ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®æ—¶çš„çŠ¶æ€å€¼ï¼Œè€Œä¸æ˜¯5ç§’åçš„æœ€æ–°å€¼ã€‚

## ğŸ“ æ€»ç»“

- ğŸ”„ è®¾ç½®stateä¼šè¯·æ±‚ä¸€æ¬¡æ–°çš„æ¸²æŸ“ï¼Œä½†ä¸ä¼šæ”¹å˜å·²æœ‰çš„stateå˜é‡
- ğŸ“¸ æ¯æ¬¡æ¸²æŸ“éƒ½æœ‰è‡ªå·±çš„stateå¿«ç…§ï¼Œä¸ä¼šéšæ—¶é—´æ”¹å˜
- ğŸ”’ åœ¨ä¸€æ¬¡æ¸²æŸ“çš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œstateå€¼æ˜¯å›ºå®šçš„
- ğŸ•°ï¸ å³ä½¿äº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„ä»£ç æ˜¯å¼‚æ­¥çš„ï¼Œå®ƒä¹Ÿä¼š"è®°ä½"åˆ›å»ºå®ƒé‚£ä¸€åˆ»çš„stateå€¼
- ğŸ“Š å¿ƒæ™ºæ¨¡å‹ï¼šæŠŠJSXçœ‹ä½œæ˜¯stateå€¼å¿«ç…§çš„ç»“æœï¼Œè€Œä¸æ˜¯å¯ä»¥ç›´æ¥è¢«ä¿®æ”¹çš„æ¨¡æ¿
- ğŸ“± è¿‡å»åˆ›å»ºçš„äº‹ä»¶å¤„ç†å‡½æ•°æ‹¥æœ‰åˆ›å»ºå®ƒä»¬é‚£æ¬¡æ¸²æŸ“ä¸­çš„stateå€¼

> å‚è€ƒï¼š[Reactå®˜æ–¹æ–‡æ¡£-Stateå¦‚åŒå¿«ç…§](https://zh-hans.react.dev/learn/state-as-a-snapshot) 